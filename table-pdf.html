<!DOCTYPE html>
<html>
<head>
  <title>Táblázat létrehozása</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/3.10.0/pdf-lib.min.js"></script>
  <script>
  async function saveAsPDF() {
    const table = document.getElementById("dataTable");

    const pdfDoc = await PDFLib.PDFDocument.create();
    const page = pdfDoc.addPage([400, 300]);

    const { height } = page.getSize();

    const font = await pdfDoc.embedFont(PDFLib.StandardFonts.Helvetica);

    const tableData = {
      headers: ["Név", "Kor"],
      rows: [],
    };

    for (let i = 1; i < table.rows.length; i++) {
      const rowData = [];
      for (let j = 0; j < table.rows[i].cells.length; j++) {
        rowData.push(table.rows[i].cells[j].innerText);
      }
      tableData.rows.push(rowData);
    }

    const tableWidth = 400;
    const tableHeight = height - 50;

    const tableDraw = new PDFLib.Table(tableData.headers, tableData.rows);
    tableDraw.x = 50;
    tableDraw.y = height - 100;
    tableDraw.width = tableWidth;
    tableDraw.height = tableHeight;
    tableDraw.draw(page);

    const pdfBytes = await pdfDoc.save();

    const pdfDataUri = URL.createObjectURL(new Blob([pdfBytes], { type: "application/pdf" }));
    const downloadLink = document.createElement("a");
    downloadLink.href = pdfDataUri;
    downloadLink.download = "adatok.pdf";
    downloadLink.click();
  }
</script>
</head>
<body>
  <form id="inputForm">
    <label for="name">Név:</label>
    <input type="text" id="name" required>
    <label for="age">Kor:</label>
    <input type="number" id="age" required>
    <button type="button" onclick="addRow()">Hozzáadás</button>
  </form>

  <table id="dataTable">
    <tr>
      <th>Név</th>
      <th>Kor</th>
    </tr>
  </table>
  
  <!-- Az űrlaphoz hozzáadandó -->
<button type="button" onclick="saveAsPDF()">Mentés PDF-ként</button>

  <script>
    function addRow() {
      const nameInput = document.getElementById("name");
      const ageInput = document.getElementById("age");
      const name = nameInput.value;
      const age = ageInput.value;

      if (name && age) {
        const table = document.getElementById("dataTable");
        const newRow = table.insertRow(-1);
        const nameCell = newRow.insertCell(0);
        const ageCell = newRow.insertCell(1);

        nameCell.innerHTML = name;
        ageCell.innerHTML = age;

        nameInput.value = "";
        ageInput.value = "";
      } else {
        alert("Kérlek töltsd ki mindkét mezőt!");
      }
    }
  </script>
  <!-- Az előző HTML kódhoz hozzáadandó -->
</body>
</html>
